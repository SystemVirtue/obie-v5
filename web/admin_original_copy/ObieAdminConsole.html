<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Obie Jukebox ‚Äî Admin Console</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { width: 100%; height: 100%; overflow: hidden; background: #050505; }

:root {
  --amber: #f59e0b;
  --amber-dim: rgba(245,158,11,0.15);
  --amber-glow: rgba(245,158,11,0.35);
  /* Dynamic accent (mirrors amber by default, overridden by JS prefs) */
  --accent: #f59e0b;
  --accent-dim: rgba(245,158,11,0.15);
  --accent-border: rgba(245,158,11,0.3);
  --accent-glow: rgba(245,158,11,0.35);
  --accent-rgb: 245,158,11;
  /* Font scale */
  --ui-zoom: 1;
  --green: #22c55e;
  --blue: #3b82f6;
  --surface: #111111;
  --surface2: #161616;
  --border: rgba(255,255,255,0.07);
  --text: #f5f5f5;
  --muted: rgba(255,255,255,0.4);
  --faint: rgba(255,255,255,0.12);
  --font-display: 'Outfit', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
}

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }

input[type=range] { -webkit-appearance: none; width: 100%; background: transparent; }
input[type=range]::-webkit-slider-runnable-track { height: 3px; border-radius: 99px; background: rgba(255,255,255,0.15); }
input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; width: 14px; height: 14px; border-radius: 50%; background: var(--amber); margin-top: -5.5px; box-shadow: 0 0 10px rgba(245,158,11,0.6); cursor: pointer; }

/* ‚îÄ‚îÄ‚îÄ Layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
#app { display: flex; flex-direction: column; width: 100%; height: 100vh; color: #fff; font-family: var(--font-display); overflow: hidden; }

/* ‚îÄ‚îÄ‚îÄ Now Playing Stage ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
#stage {
  position: relative;
  height: 33vh;
  min-height: 240px;
  flex-shrink: 0;
  overflow: hidden;
  background: #050505;
}
#stage-backdrop {
  position: absolute; inset: 0; overflow: hidden;
}
#stage-backdrop img {
  position: absolute; width: 100%; height: 100%;
  object-fit: cover;
  filter: blur(60px) saturate(1.4) brightness(0.3);
  transform: scale(1.4);
}
#stage-backdrop::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(135deg, rgba(5,5,5,0.8) 0%, rgba(5,5,5,0.25) 50%, rgba(5,5,5,0.9) 100%);
}
#stage-grain {
  position: absolute; inset: 0; opacity: 0.15; pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.5'/%3E%3C/svg%3E");
  background-size: 120px 120px;
}
#stage-content {
  position: relative; height: 100%;
  display: flex; flex-direction: column; justify-content: space-between;
  padding: 18px 24px 0;
}
#stage-top { display: flex; align-items: flex-start; gap: 18px; }

/* Thumbnail */
.thumb-wrap {
  position: relative; flex-shrink: 0;
  width: 84px; height: 84px;
}
.thumb-wrap img {
  width: 100%; height: 100%; border-radius: 14px; object-fit: cover;
  box-shadow: 0 8px 32px rgba(0,0,0,0.9), 0 0 0 1px rgba(255,255,255,0.07);
}
.live-dot {
  position: absolute; bottom: -4px; right: -4px;
  width: 16px; height: 16px; border-radius: 50%;
  background: #16a34a; border: 2.5px solid #050505;
  display: flex; align-items: center; justify-content: center;
}
.live-dot::after {
  content: ''; width: 7px; height: 7px; border-radius: 50%;
  background: #4ade80;
  animation: ping 1.5s ease-in-out infinite;
}
@keyframes ping { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.8);opacity:0} }

/* Song info */
.song-info { flex: 1; min-width: 0; padding-top: 4px; }
.now-badge { font-family: var(--font-mono); font-size: 9px; letter-spacing: 0.12em; color: var(--amber); text-transform: uppercase; }
.song-title { font-family: var(--font-display); font-size: 22px; font-weight: 700; letter-spacing: -0.025em; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 2px; }
.song-artist { font-family: var(--font-display); font-size: 13px; color: rgba(255,255,255,0.5); margin-top: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Up next strip */
.up-next-strip { display: flex; flex-direction: column; gap: 5px; width: 260px; flex-shrink: 0; }
.up-next-label { font-family: var(--font-mono); font-size: 9px; letter-spacing: 0.12em; color: var(--muted); text-transform: uppercase; margin-bottom: 2px; }
.up-next-item {
  display: flex; align-items: center; gap: 8px;
  border-radius: 10px; padding: 6px 10px;
  background: rgba(255,255,255,0.06); backdrop-filter: blur(4px);
}
.up-next-item img { width: 30px; height: 30px; border-radius: 6px; object-fit: cover; flex-shrink: 0; }
.up-next-pos { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.2); width: 12px; flex-shrink: 0; }
.up-next-title { font-family: var(--font-display); font-size: 12px; font-weight: 500; color: rgba(255,255,255,0.85); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.up-next-artist { font-size: 10px; color: rgba(255,255,255,0.3); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.up-next-dur { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.3); flex-shrink: 0; margin-left: auto; padding-left: 6px; }

/* Kiosk requests */
.kiosk-panel { width: 220px; flex-shrink: 0; }
.kiosk-label { display: flex; align-items: center; gap: 6px; margin-bottom: 6px; }
.kiosk-dot { width: 6px; height: 6px; border-radius: 50%; background: #60a5fa; animation: pulse 2s ease-in-out infinite; }
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }
.kiosk-label span { font-family: var(--font-mono); font-size: 9px; letter-spacing: 0.1em; color: #60a5fa; text-transform: uppercase; }
.kiosk-item {
  display: flex; align-items: center; gap: 8px;
  border-radius: 10px; padding: 6px 10px; margin-bottom: 5px;
  background: rgba(59,130,246,0.09); border: 1px solid rgba(59,130,246,0.18);
}
.kiosk-item img { width: 28px; height: 28px; border-radius: 5px; object-fit: cover; flex-shrink: 0; }
.kiosk-requester { font-size: 10px; color: #60a5fa; }
.kiosk-actions { display: flex; gap: 3px; margin-left: auto; }
.kiosk-btn { width: 22px; height: 22px; border-radius: 6px; border: none; background: transparent; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 13px; transition: background 0.15s; }
.kiosk-btn.accept:hover { background: rgba(34,197,94,0.2); }
.kiosk-btn.reject:hover { background: rgba(248,113,113,0.2); }

/* Controls */
#stage-controls { padding-bottom: 18px; }
.progress-row { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; }
.time-label { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.3); flex-shrink: 0; }
.progress-bar {
  flex: 1; height: 3px; border-radius: 99px; cursor: pointer; position: relative;
  background: rgba(255,255,255,0.12);
}
.progress-fill {
  height: 100%; border-radius: 99px;
  background: linear-gradient(90deg, #f59e0b, #fbbf24);
  transition: width 0.3s linear;
  position: relative;
}
.progress-fill::after {
  content: ''; position: absolute; right: 0; top: 50%;
  width: 12px; height: 12px; border-radius: 50%; background: #fff;
  transform: translate(50%, -50%) scale(0);
  transition: transform 0.15s;
  box-shadow: 0 0 10px rgba(245,158,11,0.7);
}
.progress-bar:hover .progress-fill::after { transform: translate(50%,-50%) scale(1); }

.controls-row { display: flex; align-items: center; gap: 8px; }
.ctrl-btn {
  width: 32px; height: 32px; border-radius: 8px; border: none;
  background: transparent; color: rgba(255,255,255,0.4);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: background 0.15s, color 0.15s; font-size: 15px;
}
.ctrl-btn:hover { background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.8); }
.play-btn {
  width: 42px; height: 42px; border-radius: 50%; border: none;
  background: linear-gradient(135deg, #f59e0b, #d97706);
  color: #000; display: flex; align-items: center; justify-content: center;
  cursor: pointer; transition: transform 0.15s, box-shadow 0.15s;
  box-shadow: 0 4px 20px rgba(245,158,11,0.45);
  font-size: 16px; flex-shrink: 0;
}
.play-btn:hover { transform: scale(1.08); box-shadow: 0 6px 28px rgba(245,158,11,0.6); }
.play-btn:active { transform: scale(0.96); }
.divider-v { width: 1px; height: 20px; background: rgba(255,255,255,0.1); margin: 0 4px; }
.vol-group { display: flex; align-items: center; gap: 8px; }
.vol-icon { font-size: 14px; color: rgba(255,255,255,0.4); }
.vol-track { width: 70px; height: 3px; border-radius: 99px; background: rgba(255,255,255,0.15); cursor: pointer; position: relative; }
.vol-fill { height: 100%; border-radius: 99px; background: rgba(255,255,255,0.65); }
.vol-label { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.3); width: 24px; }
.spacer { flex: 1; }
.status-pill {
  display: flex; align-items: center; gap: 5px; padding: 4px 10px; border-radius: 99px;
  font-family: var(--font-mono); font-size: 9px; letter-spacing: 0.06em;
}
.pill-online { background: rgba(34,197,94,0.12); border: 1px solid rgba(34,197,94,0.22); color: #4ade80; }
.pill-requests { background: rgba(59,130,246,0.12); border: 1px solid rgba(59,130,246,0.22); color: #60a5fa; }
.pill-dot { width: 5px; height: 5px; border-radius: 50%; }

/* Stage bottom line */
#stage::after {
  content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, rgba(245,158,11,0.3), transparent);
}

/* ‚îÄ‚îÄ‚îÄ Bottom split ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
#bottom { display: flex; flex: 1; overflow: hidden; }

/* ‚îÄ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
#sidebar {
  display: flex; flex-direction: column; flex-shrink: 0;
  width: 220px; height: 100%;
  background: #080808;
  border-right: 1px solid var(--border);
  transition: width 0.25s cubic-bezier(0.4,0,0.2,1);
  overflow: hidden;
}
#sidebar.collapsed { width: 60px; }

.sidebar-header {
  display: flex; align-items: center; gap: 10px;
  padding: 14px; flex-shrink: 0; height: 56px;
  border-bottom: 1px solid rgba(255,255,255,0.05);
}
.obie-logo {
  width: 32px; height: 32px; border-radius: 10px; flex-shrink: 0;
  background: linear-gradient(135deg, #f59e0b, #d97706);
  display: flex; align-items: center; justify-content: center;
  font-family: var(--font-display); font-size: 15px; font-weight: 800; color: #000;
  box-shadow: 0 0 16px rgba(245,158,11,0.35);
}
.obie-wordmark { overflow: hidden; }
.obie-wordmark .name { font-family: var(--font-display); font-size: 15px; font-weight: 700; color: #fff; letter-spacing: -0.025em; white-space: nowrap; }
.obie-wordmark .sub { font-family: var(--font-mono); font-size: 8px; color: rgba(255,255,255,0.25); letter-spacing: 0.1em; text-transform: uppercase; white-space: nowrap; }
.collapse-btn {
  margin-left: auto; width: 22px; height: 22px; border: none; background: transparent;
  color: rgba(255,255,255,0.25); cursor: pointer; display: flex; align-items: center; justify-content: center;
  border-radius: 6px; flex-shrink: 0; font-size: 13px; transition: background 0.15s, color 0.15s;
}
.collapse-btn:hover { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.6); }

/* Nav */
#sidebar nav { flex: 1; padding: 10px 0; overflow-y: auto; overflow-x: hidden; }
.nav-group-btn {
  width: 100%; border: none; background: transparent; cursor: pointer;
  display: flex; align-items: center; gap: 10px; padding: 9px 14px;
  color: rgba(255,255,255,0.4); transition: color 0.15s; position: relative;
  font-family: var(--font-display);
}
.nav-group-btn.active { color: var(--amber); }
.nav-group-btn::before {
  content: ''; position: absolute; left: 0; top: 50%;
  width: 2px; height: 0; border-radius: 0 2px 2px 0;
  background: var(--amber); transform: translateY(-50%);
  transition: height 0.2s;
}
.nav-group-btn.active::before { height: 20px; }
.nav-icon-wrap {
  width: 32px; height: 32px; border-radius: 8px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  transition: background 0.15s; font-size: 16px;
}
.nav-group-btn.active .nav-icon-wrap { background: rgba(245,158,11,0.14); }
.nav-group-btn:not(.active):hover { color: rgba(255,255,255,0.75); }
.nav-group-btn:not(.active):hover .nav-icon-wrap { background: rgba(255,255,255,0.06); }
.nav-label { font-size: 14px; font-weight: 500; white-space: nowrap; flex: 1; text-align: left; }
.nav-chevron { font-size: 11px; flex-shrink: 0; transition: transform 0.2s; opacity: 0.5; }
.nav-chevron.open { transform: rotate(90deg); }

/* Submenu */
.nav-submenu {
  background: rgba(255,255,255,0.015);
  border-left: 1px solid rgba(255,255,255,0.06);
  margin-left: 22px; overflow: hidden;
  max-height: 0; transition: max-height 0.25s cubic-bezier(0.4,0,0.2,1);
}
.nav-submenu.open { max-height: 200px; }
.sub-btn {
  width: 100%; border: none; background: transparent; cursor: pointer;
  display: flex; align-items: center; gap: 7px; padding: 8px 14px;
  font-family: var(--font-display); font-size: 13px; font-weight: 400;
  color: rgba(255,255,255,0.35); transition: color 0.15s;
}
.sub-btn.active { color: var(--amber); }
.sub-btn:not(.active):hover { color: rgba(255,255,255,0.65); }
.sub-dot { width: 5px; height: 5px; border-radius: 50%; background: rgba(255,255,255,0.15); flex-shrink: 0; }
.sub-btn.active .sub-dot { background: var(--amber); }
.sub-badge {
  margin-left: auto; font-family: var(--font-mono); font-size: 9px;
  padding: 1px 5px; border-radius: 99px;
  background: rgba(59,130,246,0.2); color: #60a5fa;
}

/* ‚îÄ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
#main { flex: 1; overflow: hidden; display: flex; flex-direction: column; background: #060606; }
.panel { display: none; height: 100%; flex-direction: column; }
.panel.active { display: flex; }

.panel-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 24px; flex-shrink: 0;
  border-bottom: 1px solid var(--border);
}
.panel-title { font-family: var(--font-display); font-size: 20px; font-weight: 700; color: #fff; letter-spacing: -0.02em; }
.panel-sub { font-family: var(--font-mono); font-size: 10px; color: var(--muted); margin-top: 3px; }
.header-actions { display: flex; gap: 8px; }

.btn {
  display: flex; align-items: center; gap: 6px; padding: 7px 14px;
  border-radius: 10px; border: none; cursor: pointer; font-family: var(--font-display);
  font-size: 13px; font-weight: 500; transition: opacity 0.15s, background 0.15s;
}
.btn-amber { background: rgba(245,158,11,0.14); color: var(--amber); border: 1px solid rgba(245,158,11,0.25); }
.btn-amber:hover { background: rgba(245,158,11,0.22); }
.btn-ghost { background: rgba(255,255,255,0.05); color: var(--muted); border: 1px solid rgba(255,255,255,0.1); }
.btn-ghost:hover { background: rgba(255,255,255,0.1); }
.btn-solid { background: linear-gradient(135deg, #f59e0b, #d97706); color: #000; font-weight: 600; }
.btn-solid:hover { opacity: 0.92; }

.panel-body { flex: 1; overflow-y: auto; padding: 16px 24px; }

/* Queue items */
.queue-item {
  display: flex; align-items: center; gap: 10px;
  border-radius: 12px; padding: 10px 12px; margin-bottom: 4px;
  cursor: pointer; transition: background 0.12s;
  color: rgba(255,255,255,0.45); position: relative;
}
.queue-item:hover { background: rgba(255,255,255,0.05); }
.queue-item:hover .item-actions { opacity: 1; }
.queue-item:hover .item-dur { opacity: 0; }
.item-pos { font-family: var(--font-mono); font-size: 11px; width: 22px; text-align: center; flex-shrink: 0; }
.item-thumb { width: 36px; height: 36px; border-radius: 8px; object-fit: cover; flex-shrink: 0; }
.item-info { flex: 1; min-width: 0; }
.item-title { font-family: var(--font-display); font-size: 13px; font-weight: 500; color: #fff; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.item-artist { font-size: 11px; color: rgba(255,255,255,0.38); }
.item-dur { font-family: var(--font-mono); font-size: 11px; flex-shrink: 0; transition: opacity 0.15s; }
.item-actions { display: flex; gap: 3px; flex-shrink: 0; position: absolute; right: 12px; opacity: 0; transition: opacity 0.15s; }
.icon-btn {
  width: 26px; height: 26px; border: none; border-radius: 7px; background: transparent;
  display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 13px;
  transition: background 0.12s;
}
.icon-btn.del { color: #f87171; }
.icon-btn.del:hover { background: rgba(248,113,113,0.15); }
.icon-btn.ok { color: #4ade80; }
.icon-btn.ok:hover { background: rgba(74,222,128,0.15); }

/* Now playing highlight */
.np-highlight {
  display: flex; align-items: center; gap: 14px;
  border-radius: 14px; padding: 14px 16px; margin-bottom: 16px;
  background: rgba(245,158,11,0.06); border: 1px solid rgba(245,158,11,0.18);
}
.np-highlight img { width: 52px; height: 52px; border-radius: 10px; object-fit: cover; flex-shrink: 0; }
.np-playing-badge { display: flex; align-items: center; gap: 5px; margin-top: 4px; }
.np-playing-dot { width: 5px; height: 5px; border-radius: 50%; background: #4ade80; animation: pulse 2s ease-in-out infinite; }

/* Playlist grid */
.pl-item {
  display: flex; align-items: center; gap: 14px;
  border-radius: 14px; padding: 12px 16px; margin-bottom: 6px;
  background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05);
  cursor: pointer; transition: background 0.15s; position: relative;
}
.pl-item:hover { background: rgba(255,255,255,0.05); }
.pl-item:hover .pl-actions { opacity: 1; }
.pl-item.pl-active { background: rgba(245,158,11,0.06); border-color: rgba(245,158,11,0.2); }
.pl-icon {
  width: 44px; height: 44px; border-radius: 12px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; font-size: 18px;
  background: rgba(255,255,255,0.07);
}
.pl-item.pl-active .pl-icon { background: rgba(245,158,11,0.18); }
.pl-name { font-family: var(--font-display); font-size: 14px; font-weight: 600; color: #fff; }
.pl-meta { font-size: 11px; color: rgba(255,255,255,0.35); margin-top: 2px; }
.pl-active-badge {
  font-family: var(--font-mono); font-size: 8px; padding: 2px 6px; border-radius: 99px;
  background: rgba(34,197,94,0.15); color: #4ade80; text-transform: uppercase; letter-spacing: 0.05em;
}
.pl-actions { position: absolute; right: 16px; display: flex; gap: 6px; opacity: 0; transition: opacity 0.15s; }

/* Settings */
.settings-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 14px 0; border-bottom: 1px solid rgba(255,255,255,0.05);
}
.settings-label { font-family: var(--font-display); font-size: 14px; font-weight: 500; color: #e5e5e5; }
.settings-desc { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.28); margin-top: 3px; }
.toggle-wrap { position: relative; width: 44px; height: 24px; cursor: pointer; flex-shrink: 0; }
.toggle-wrap input { opacity: 0; width: 0; height: 0; }
.toggle-track {
  position: absolute; inset: 0; border-radius: 99px;
  background: rgba(255,255,255,0.12); transition: background 0.2s;
}
.toggle-wrap input:checked + .toggle-track { background: var(--amber); }
.toggle-thumb {
  position: absolute; top: 3px; left: 3px; width: 18px; height: 18px;
  border-radius: 50%; background: #fff; transition: left 0.2s;
  box-shadow: 0 1px 4px rgba(0,0,0,0.5);
}
.toggle-wrap input:checked ~ .toggle-thumb { left: 23px; }

.num-input {
  width: 70px; text-align: center; padding: 8px 10px; border-radius: 10px; border: none; outline: none;
  background: #111; border: 1px solid rgba(255,255,255,0.1); color: #fff;
  font-family: var(--font-mono); font-size: 13px;
}

/* Script cards */
.script-card {
  border-radius: 16px; margin-bottom: 10px; overflow: hidden;
  background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.07);
}
.script-header { display: flex; align-items: flex-start; gap: 14px; padding: 18px; }
.script-icon { font-size: 24px; flex-shrink: 0; margin-top: 2px; }
.script-name { font-family: var(--font-mono); font-size: 13px; color: #e5e5e5; }
.script-cat { font-family: var(--font-mono); font-size: 9px; padding: 2px 7px; border-radius: 99px; background: rgba(245,158,11,0.12); color: var(--amber); }
.script-desc { font-family: var(--font-display); font-size: 13px; color: rgba(255,255,255,0.42); margin-top: 4px; }
.script-input {
  width: 100%; padding: 10px 14px; border-radius: 10px; margin-top: 10px;
  background: #0d0d0d; border: 1px solid rgba(255,255,255,0.1); color: #fff; outline: none;
  font-family: var(--font-mono); font-size: 12px;
}
.script-log {
  border-top: 1px solid rgba(255,255,255,0.06);
}
.log-header { display: flex; align-items: center; gap: 7px; padding: 8px 18px; background: rgba(0,0,0,0.5); }
.log-status-dot { width: 8px; height: 8px; border-radius: 50%; }
.log-status-dot.running { background: #fbbf24; animation: pulse 1s ease-in-out infinite; }
.log-status-dot.done { background: #4ade80; }
.log-text { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.35); }
.log-pre {
  padding: 12px 18px; background: rgba(0,0,0,0.65); max-height: 120px; overflow-y: auto;
  font-family: var(--font-mono); font-size: 11px; color: #4ade80; white-space: pre-wrap;
}

/* Logs panel */
.log-entry {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 10px 14px; border-radius: 10px; margin-bottom: 5px;
  background: rgba(255,255,255,0.018); border: 1px solid rgba(255,255,255,0.04);
}
.log-time { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.22); flex-shrink: 0; width: 58px; }
.log-level { font-family: var(--font-mono); font-size: 9px; padding: 2px 7px; border-radius: 5px; flex-shrink: 0; text-transform: uppercase; letter-spacing: 0.04em; }
.log-level.info { background: rgba(59,130,246,0.12); color: #60a5fa; border: 1px solid rgba(59,130,246,0.2); }
.log-level.warning { background: rgba(251,191,36,0.1); color: #fbbf24; border: 1px solid rgba(251,191,36,0.18); }
.log-level.error { background: rgba(248,113,113,0.1); color: #f87171; border: 1px solid rgba(248,113,113,0.18); }
.log-source { font-family: var(--font-mono); font-size: 10px; color: var(--amber); flex-shrink: 0; width: 120px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.log-msg { font-family: var(--font-mono); font-size: 11px; color: rgba(255,255,255,0.55); flex: 1; }

.log-filters { display: flex; gap: 6px; }
.filter-btn {
  padding: 5px 11px; border-radius: 8px; border: none; cursor: pointer;
  font-family: var(--font-mono); font-size: 10px; transition: all 0.15s;
}
.search-bar {
  display: flex; align-items: center; gap: 8px;
  padding: 6px 12px; border-radius: 10px;
  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08);
}
.search-bar input { background: transparent; border: none; outline: none; color: #fff; font-family: var(--font-mono); font-size: 12px; width: 150px; }

/* Import form */
.import-card {
  max-width: 480px; padding: 24px; border-radius: 18px;
  background: rgba(255,255,255,0.025); border: 1px solid rgba(255,255,255,0.07);
}
.field-label { font-family: var(--font-display); font-size: 13px; font-weight: 500; color: rgba(255,255,255,0.65); margin-bottom: 8px; display: block; }
.text-input {
  width: 100%; padding: 12px 16px; border-radius: 12px; border: none; outline: none;
  background: #0d0d0d; border: 1px solid rgba(255,255,255,0.1); color: #fff;
  font-family: var(--font-mono); font-size: 13px; transition: border-color 0.15s;
}
.text-input:focus { border-color: rgba(245,158,11,0.4); }
.field-hint { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.28); margin-top: 6px; }

@media (max-width: 900px) {
  .up-next-strip, .kiosk-panel { display: none; }
}
@media (max-width: 700px) {
  #sidebar { width: 60px; }
  .obie-wordmark, .collapse-btn, .nav-label, .nav-chevron, .nav-submenu { display: none; }
}

/* ‚îÄ‚îÄ‚îÄ Preferences panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.prefs-section {
  max-width: 520px;
  margin-bottom: 28px;
}
.prefs-section-title {
  font-family: var(--font-mono);
  font-size: 9px;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: rgba(255,255,255,0.3);
  margin-bottom: 14px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

/* Font size control */
.fontsize-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 18px;
  border-radius: 14px;
  background: rgba(255,255,255,0.025);
  border: 1px solid rgba(255,255,255,0.07);
  margin-bottom: 10px;
}
.fontsize-label-wrap { flex: 1; }
.fontsize-label { font-family: var(--font-display); font-size: 14px; font-weight: 500; color: #e5e5e5; }
.fontsize-desc { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.28); margin-top: 3px; }
.fontsize-preview { font-family: var(--font-display); font-size: 22px; font-weight: 700; line-height: 1; }
.fontsize-buttons { display: flex; gap: 6px; align-items: center; }
.fs-btn {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 3px; width: 64px; padding: 8px 6px;
  border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.04); cursor: pointer;
  transition: all 0.15s; font-family: var(--font-display);
}
.fs-btn:hover { background: rgba(255,255,255,0.09); border-color: rgba(255,255,255,0.2); }
.fs-btn.active { background: var(--accent-dim); border-color: var(--accent-border); }
.fs-btn-icon { font-size: 18px; line-height: 1; }
.fs-btn-label { font-size: 10px; color: rgba(255,255,255,0.45); }
.fs-btn.active .fs-btn-label { color: var(--accent); }
.fs-scale-track {
  display: flex; align-items: center; gap: 2px;
  padding: 3px; border-radius: 8px;
  background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.08);
}
.fs-scale-pip {
  width: 8px; height: 8px; border-radius: 50%;
  background: rgba(255,255,255,0.15); transition: background 0.2s, transform 0.2s;
}
.fs-scale-pip.active { background: var(--accent); transform: scale(1.3); }

/* Color theme */
.color-section-inner {
  padding: 18px;
  border-radius: 14px;
  background: rgba(255,255,255,0.025);
  border: 1px solid rgba(255,255,255,0.07);
}
.color-wheel-row {
  display: flex; align-items: center; gap: 16px; margin-bottom: 18px;
}
.color-wheel-btn {
  position: relative; width: 56px; height: 56px; border-radius: 50%;
  border: 3px solid rgba(255,255,255,0.15); cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: border-color 0.2s, box-shadow 0.2s;
  overflow: hidden;
}
.color-wheel-btn:hover { border-color: rgba(255,255,255,0.4); }
.color-wheel-inner {
  width: 100%; height: 100%; border-radius: 50%;
  background: conic-gradient(
    hsl(0,100%,50%), hsl(30,100%,50%), hsl(60,100%,50%), hsl(90,100%,50%),
    hsl(120,100%,50%), hsl(150,100%,50%), hsl(180,100%,50%), hsl(210,100%,50%),
    hsl(240,100%,50%), hsl(270,100%,50%), hsl(300,100%,50%), hsl(330,100%,50%),
    hsl(360,100%,50%)
  );
  cursor: pointer;
}
.color-wheel-btn input[type=color] {
  position: absolute; inset: 0; width: 100%; height: 100%;
  opacity: 0; cursor: pointer; border: none;
}
.color-current-swatch {
  width: 38px; height: 38px; border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.15);
  flex-shrink: 0;
  transition: background 0.2s;
}
.color-wheel-info { flex: 1; }
.color-wheel-title { font-family: var(--font-display); font-size: 14px; font-weight: 500; color: #e5e5e5; }
.color-wheel-sub { font-family: var(--font-mono); font-size: 10px; color: rgba(255,255,255,0.3); margin-top: 3px; }
.color-hex-row { display: flex; align-items: center; gap: 8px; margin-top: 8px; }
.color-hex-input {
  font-family: var(--font-mono); font-size: 13px;
  background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12);
  border-radius: 8px; padding: 5px 10px; color: #fff; width: 96px; outline: none;
  transition: border-color 0.15s;
}
.color-hex-input:focus { border-color: rgba(255,255,255,0.3); }
.color-apply-btn {
  font-family: var(--font-display); font-size: 12px; font-weight: 500;
  padding: 5px 12px; border-radius: 8px; border: none; cursor: pointer;
  background: rgba(255,255,255,0.1); color: rgba(255,255,255,0.7);
  transition: all 0.15s;
}
.color-apply-btn:hover { background: rgba(255,255,255,0.18); color: #fff; }

/* Preset swatches */
.preset-grid { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 4px; }
.preset-label { font-family: var(--font-mono); font-size: 9px; color: rgba(255,255,255,0.28); margin-bottom: 10px; letter-spacing: 0.08em; text-transform: uppercase; }
.preset-swatch {
  width: 32px; height: 32px; border-radius: 8px; cursor: pointer;
  border: 2px solid transparent; transition: transform 0.15s, border-color 0.15s;
  position: relative;
}
.preset-swatch:hover { transform: scale(1.15); }
.preset-swatch.selected { border-color: #fff; transform: scale(1.1); }
.preset-swatch.selected::after {
  content: '‚úì'; position: absolute; inset: 0; display: flex;
  align-items: center; justify-content: center;
  font-size: 13px; color: #fff; font-weight: 700;
  text-shadow: 0 1px 3px rgba(0,0,0,0.6);
}

/* Live color preview strip */
.color-preview-strip {
  margin-top: 16px; padding: 12px 16px; border-radius: 10px;
  background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.06);
  display: flex; align-items: center; gap: 12px;
}
.preview-strip-label { font-family: var(--font-mono); font-size: 9px; color: rgba(255,255,255,0.3); letter-spacing: 0.08em; text-transform: uppercase; flex-shrink: 0; }
.preview-elements { display: flex; align-items: center; gap: 8px; flex: 1; }
.preview-pill { font-family: var(--font-mono); font-size: 9px; padding: 3px 9px; border-radius: 99px; }
.preview-dot { width: 8px; height: 8px; border-radius: 50%; }
.preview-bar { height: 3px; flex: 1; border-radius: 99px; }
.preview-btn { font-family: var(--font-display); font-size: 11px; font-weight: 600; padding: 5px 12px; border-radius: 8px; color: #000; }
.preview-nav-dot { width: 3px; height: 16px; border-radius: 99px; }
</style>
</head>
<body>
<div id="app">

  <!-- ‚ïê‚ïê NOW PLAYING STAGE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="stage">
    <div id="stage-backdrop">
      <img id="bg-art" src="https://i.ytimg.com/vi/4UDNndFX94Y/mqdefault.jpg" alt="">
    </div>
    <div id="stage-grain"></div>
    <div id="stage-content">
      <div id="stage-top">

        <!-- Thumbnail -->
        <div class="thumb-wrap">
          <img id="np-thumb" src="https://i.ytimg.com/vi/4UDNndFX94Y/mqdefault.jpg" alt="">
          <div class="live-dot"></div>
        </div>

        <!-- Song info -->
        <div class="song-info">
          <div class="now-badge">‚óè Now Playing ¬∑ Obie Playlist</div>
          <div class="song-title" id="np-title">Sonnentanz (Sun Don't Shine)</div>
          <div class="song-artist" id="np-artist">Klangkarussell ft. Will Heard</div>
        </div>

        <!-- Up Next -->
        <div class="up-next-strip">
          <div class="up-next-label">Up Next</div>
          <div class="up-next-item">
            <span class="up-next-pos">1</span>
            <img src="https://i.ytimg.com/vi/gGdGFtwCNBE/mqdefault.jpg" alt="">
            <div style="flex:1;min-width:0">
              <div class="up-next-title">Midnight City</div>
              <div class="up-next-artist">M83</div>
            </div>
            <span class="up-next-dur">4:03</span>
          </div>
          <div class="up-next-item">
            <span class="up-next-pos">2</span>
            <img src="https://i.ytimg.com/vi/1rZdHGmRbdA/mqdefault.jpg" alt="">
            <div style="flex:1;min-width:0">
              <div class="up-next-title">Oblivion</div>
              <div class="up-next-artist">Grimes</div>
            </div>
            <span class="up-next-dur">5:03</span>
          </div>
        </div>

        <!-- Kiosk Requests -->
        <div class="kiosk-panel">
          <div class="kiosk-label">
            <div class="kiosk-dot"></div>
            <span>2 Kiosk Requests</span>
          </div>
          <div class="kiosk-item">
            <img src="https://i.ytimg.com/vi/fJ9rUzIMcZQ/mqdefault.jpg" alt="">
            <div style="flex:1;min-width:0">
              <div class="up-next-title">Bohemian Rhapsody</div>
              <div class="kiosk-requester">Table 4</div>
            </div>
            <div class="kiosk-actions">
              <button class="kiosk-btn accept">‚úì</button>
              <button class="kiosk-btn reject" style="color:#f87171">‚úï</button>
            </div>
          </div>
          <div class="kiosk-item">
            <img src="https://i.ytimg.com/vi/1w7OgIMMRc4/mqdefault.jpg" alt="">
            <div style="flex:1;min-width:0">
              <div class="up-next-title">Sweet Child O' Mine</div>
              <div class="kiosk-requester">Bar</div>
            </div>
            <div class="kiosk-actions">
              <button class="kiosk-btn accept">‚úì</button>
              <button class="kiosk-btn reject" style="color:#f87171">‚úï</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div id="stage-controls">
        <div class="progress-row">
          <span class="time-label" id="prog-cur">1:34</span>
          <div class="progress-bar" id="prog-bar" onclick="seekTo(event)">
            <div class="progress-fill" id="prog-fill" style="width:35%"></div>
          </div>
          <span class="time-label">4:32</span>
        </div>
        <div class="controls-row">
          <button class="ctrl-btn">‚èÆ</button>
          <button class="play-btn" id="play-btn" onclick="togglePlay()">‚è∏</button>
          <button class="ctrl-btn" onclick="skipTrack()">‚è≠</button>
          <div class="divider-v"></div>
          <div class="vol-group">
            <span class="vol-icon">üîä</span>
            <div class="vol-track" onclick="setVol(event)">
              <div class="vol-fill" id="vol-fill" style="width:72%"></div>
            </div>
            <span class="vol-label" id="vol-val">72</span>
          </div>
          <div class="spacer"></div>
          <div class="status-pill pill-online">
            <div class="pill-dot" style="background:#4ade80"></div>PLAYER ONLINE
          </div>
          <div class="status-pill pill-requests">
            <div class="pill-dot" style="background:#60a5fa"></div>2 REQUESTS
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê BOTTOM SPLIT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="bottom">

    <!-- Sidebar -->
    <aside id="sidebar">
      <div class="sidebar-header">
        <div class="obie-logo">O</div>
        <div class="obie-wordmark">
          <div class="name">Obie</div>
          <div class="sub">Admin Console</div>
        </div>
        <button class="collapse-btn" onclick="toggleSidebar()">‚Äπ</button>
      </div>
      <nav>
        <!-- Queue -->
        <button class="nav-group-btn active" onclick="toggleGroup('queue','queue-next')">
          <div class="nav-icon-wrap">üéµ</div>
          <span class="nav-label">Queue</span>
          <span class="nav-chevron open" id="chev-queue">‚Ä∫</span>
        </button>
        <div class="nav-submenu open" id="sub-queue">
          <button class="sub-btn" onclick="setView('queue-now')"><div class="sub-dot"></div>Now Playing</button>
          <button class="sub-btn active" onclick="setView('queue-next')"><div class="sub-dot"></div>Up Next</button>
          <button class="sub-btn" onclick="setView('queue-priority')"><div class="sub-dot"></div>Priority Requests<span class="sub-badge">2</span></button>
        </div>
        <!-- Playlists -->
        <button class="nav-group-btn" onclick="toggleGroup('playlists','playlists-all')">
          <div class="nav-icon-wrap">üìã</div>
          <span class="nav-label">Playlists</span>
          <span class="nav-chevron" id="chev-playlists">‚Ä∫</span>
        </button>
        <div class="nav-submenu" id="sub-playlists">
          <button class="sub-btn" onclick="setView('playlists-all')"><div class="sub-dot"></div>All Playlists</button>
          <button class="sub-btn" onclick="setView('playlists-import')"><div class="sub-dot"></div>Import Playlist</button>
        </div>
        <!-- Settings -->
        <button class="nav-group-btn" onclick="toggleGroup('settings','settings-playback')">
          <div class="nav-icon-wrap">‚öôÔ∏è</div>
          <span class="nav-label">Settings</span>
          <span class="nav-chevron" id="chev-settings">‚Ä∫</span>
        </button>
        <div class="nav-submenu" id="sub-settings">
          <button class="sub-btn" onclick="setView('settings-playback')"><div class="sub-dot"></div>Playback</button>
          <button class="sub-btn" onclick="setView('settings-kiosk')"><div class="sub-dot"></div>Kiosk</button>
          <button class="sub-btn" onclick="setView('settings-branding')"><div class="sub-dot"></div>Branding</button>
          <button class="sub-btn" onclick="setView('settings-scripts')"><div class="sub-dot"></div>Functions & Scripts</button>
          <button class="sub-btn" onclick="setView('settings-prefs')"><div class="sub-dot"></div>Console Preferences</button>
        </div>
        <!-- Logs -->
        <button class="nav-group-btn" onclick="toggleGroup('logs-','logs-')">
          <div class="nav-icon-wrap">üìÑ</div>
          <span class="nav-label">Logs</span>
          <span class="nav-chevron" id="chev-logs-" style="opacity:0">‚Ä∫</span>
        </button>
      </nav>
    </aside>

    <!-- Main panels -->
    <main id="main">

      <!-- ‚îÄ‚îÄ QUEUE NOW PLAYING ‚îÄ‚îÄ -->
      <div class="panel" id="panel-queue-now">
        <div class="panel-header">
          <div><div class="panel-title">Now Playing</div><div class="panel-sub">Current song info</div></div>
          <div class="header-actions">
            <button class="btn btn-ghost">‚è≠ Skip</button>
          </div>
        </div>
        <div class="panel-body">
          <div class="np-highlight">
            <img src="https://i.ytimg.com/vi/4UDNndFX94Y/mqdefault.jpg" alt="">
            <div>
              <div style="font-family:var(--font-display);font-size:17px;font-weight:700;color:#fff">Sonnentanz (Sun Don't Shine)</div>
              <div style="font-size:13px;color:rgba(255,255,255,0.5);margin-top:2px">Klangkarussell ft. Will Heard</div>
              <div class="np-playing-badge">
                <div class="np-playing-dot"></div>
                <span style="font-family:var(--font-mono);font-size:10px;color:#4ade80">PLAYING ¬∑ 1:34 / 4:32 ¬∑ Obie Playlist #94</span>
              </div>
            </div>
          </div>
          <div style="font-family:var(--font-mono);font-size:10px;color:var(--muted);margin-bottom:10px;text-transform:uppercase;letter-spacing:.08em">Up Next</div>
          <div class="queue-item"><span class="item-pos">1</span><img class="item-thumb" src="https://i.ytimg.com/vi/gGdGFtwCNBE/mqdefault.jpg" alt=""><div class="item-info"><div class="item-title">Midnight City</div><div class="item-artist">M83</div></div><span class="item-dur">4:03</span></div>
          <div class="queue-item"><span class="item-pos">2</span><img class="item-thumb" src="https://i.ytimg.com/vi/1rZdHGmRbdA/mqdefault.jpg" alt=""><div class="item-info"><div class="item-title">Oblivion</div><div class="item-artist">Grimes</div></div><span class="item-dur">5:03</span></div>
          <div class="queue-item"><span class="item-pos">3</span><img class="item-thumb" src="https://i.ytimg.com/vi/JlVID4VhLWI/mqdefault.jpg" alt=""><div class="item-info"><div class="item-title">Flume</div><div class="item-artist">Bon Iver</div></div><span class="item-dur">3:40</span></div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ QUEUE UP NEXT ‚îÄ‚îÄ -->
      <div class="panel active" id="panel-queue-next">
        <div class="panel-header">
          <div><div class="panel-title">Up Next</div><div class="panel-sub" id="queue-count">8 songs in queue</div></div>
          <div class="header-actions">
            <button class="btn btn-amber">Ôºã Add Song</button>
            <button class="btn btn-ghost">üóë Clear</button>
          </div>
        </div>
        <div class="panel-body" id="queue-list"></div>
      </div>

      <!-- ‚îÄ‚îÄ QUEUE PRIORITY ‚îÄ‚îÄ -->
      <div class="panel" id="panel-queue-priority">
        <div class="panel-header">
          <div><div class="panel-title">Priority Requests</div><div class="panel-sub">2 kiosk requests pending</div></div>
          <div class="header-actions"><button class="btn btn-ghost">‚úì Accept All</button></div>
        </div>
        <div class="panel-body">
          <div class="queue-item" style="background:rgba(59,130,246,0.06);border:1px solid rgba(59,130,246,0.14)">
            <img class="item-thumb" src="https://i.ytimg.com/vi/fJ9rUzIMcZQ/mqdefault.jpg" alt="">
            <div class="item-info"><div class="item-title">Bohemian Rhapsody</div><div class="item-artist">Queen</div></div>
            <span style="font-family:var(--font-mono);font-size:10px;padding:2px 8px;border-radius:99px;background:rgba(59,130,246,0.2);color:#60a5fa">Table 4</span>
            <div style="display:flex;gap:4px">
              <button class="icon-btn ok">‚úì</button>
              <button class="icon-btn del">‚úï</button>
            </div>
          </div>
          <div class="queue-item" style="background:rgba(59,130,246,0.06);border:1px solid rgba(59,130,246,0.14)">
            <img class="item-thumb" src="https://i.ytimg.com/vi/1w7OgIMMRc4/mqdefault.jpg" alt="">
            <div class="item-info"><div class="item-title">Sweet Child O' Mine</div><div class="item-artist">Guns N' Roses</div></div>
            <span style="font-family:var(--font-mono);font-size:10px;padding:2px 8px;border-radius:99px;background:rgba(59,130,246,0.2);color:#60a5fa">Bar</span>
            <div style="display:flex;gap:4px">
              <button class="icon-btn ok">‚úì</button>
              <button class="icon-btn del">‚úï</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ PLAYLISTS ALL ‚îÄ‚îÄ -->
      <div class="panel" id="panel-playlists-all">
        <div class="panel-header">
          <div><div class="panel-title">Playlists</div><div class="panel-sub">8 playlists ¬∑ 1,909 total songs</div></div>
          <div class="header-actions"><button class="btn btn-amber">Ôºã New Playlist</button></div>
        </div>
        <div class="panel-body" id="pl-list"></div>
      </div>

      <!-- ‚îÄ‚îÄ PLAYLISTS IMPORT ‚îÄ‚îÄ -->
      <div class="panel" id="panel-playlists-import">
        <div class="panel-header">
          <div><div class="panel-title">Import Playlist</div><div class="panel-sub">Import from YouTube</div></div>
        </div>
        <div class="panel-body">
          <div class="import-card">
            <label class="field-label">YouTube Playlist ID</label>
            <input class="text-input" placeholder="PLN9QqCogPsXJCgeL_iEgYnW6Rl_8nIUUH">
            <div class="field-hint">Find after <code style="color:var(--amber)">?list=</code> in the playlist URL</div>
            <div style="margin-top:16px">
              <label class="field-label">Playlist Name (optional)</label>
              <input class="text-input" placeholder="My Custom Playlist">
            </div>
            <button class="btn btn-solid" style="margin-top:18px;width:100%;justify-content:center;padding:12px">Import Playlist</button>
          </div>
        </div>
      </div>

      <!-- ‚îÄ‚îÄ SETTINGS PLAYBACK ‚îÄ‚îÄ -->
      <div class="panel" id="panel-settings-playback">
        <div class="panel-header">
          <div><div class="panel-title">Settings ¬∑ Playback</div></div>
          <div class="header-actions">
            <button class="btn btn-amber" onclick="openGuide()">üìñ User Guide</button>
          </div>
        </div>
        <div class="panel-body"><div style="max-width:480px">
          <div class="settings-row"><div><div class="settings-label">Loop Playlist</div><div class="settings-desc">Restart when queue ends</div></div><label class="toggle-wrap"><input type="checkbox"><div class="toggle-track"></div><div class="toggle-thumb"></div></label></div>
          <div class="settings-row"><div><div class="settings-label">Shuffle</div><div class="settings-desc">Randomise queue order on load</div></div><label class="toggle-wrap"><input type="checkbox" checked><div class="toggle-track"></div><div class="toggle-thumb"></div></label></div>
          <div class="settings-row" style="flex-direction:column;align-items:flex-start;gap:10px">
            <div><div class="settings-label">Default Volume</div><div class="settings-desc">0‚Äì100 (currently <span id="vol-setting">75</span>)</div></div>
            <input type="range" min="0" max="100" value="75" style="width:100%" oninput="document.getElementById('vol-setting').textContent=this.value">
          </div>
          <button class="btn btn-solid" style="margin-top:20px;padding:12px 28px" onclick="showSaved(this)">Save Settings</button>
        </div></div>
      </div>

      <!-- ‚îÄ‚îÄ SETTINGS KIOSK ‚îÄ‚îÄ -->
      <div class="panel" id="panel-settings-kiosk">
        <div class="panel-header">
          <div><div class="panel-title">Settings ¬∑ Kiosk</div></div>
          <div class="header-actions"><button class="btn btn-amber" onclick="openGuide()">üìñ User Guide</button></div>
        </div>
        <div class="panel-body"><div style="max-width:480px">
          <div class="settings-row"><div><div class="settings-label">Free Play Mode</div><div class="settings-desc">Allow requests without credits</div></div><label class="toggle-wrap"><input type="checkbox"><div class="toggle-track"></div><div class="toggle-thumb"></div></label></div>
          <div class="settings-row"><div><div class="settings-label">Search Enabled</div><div class="settings-desc">Allow kiosk users to search</div></div><label class="toggle-wrap"><input type="checkbox" checked><div class="toggle-track"></div><div class="toggle-thumb"></div></label></div>
          <div class="settings-row"><div><div class="settings-label">Credits per Song</div><div class="settings-desc">credits required per request</div></div><input type="number" class="num-input" value="1" min="1"></div>
          <div class="settings-row"><div><div class="settings-label">Max Queue Size</div><div class="settings-desc">songs in normal queue</div></div><input type="number" class="num-input" value="50" min="1"></div>
          <div class="settings-row"><div><div class="settings-label">Priority Queue Limit</div><div class="settings-desc">max kiosk request slots</div></div><input type="number" class="num-input" value="10" min="1"></div>
          <button class="btn btn-solid" style="margin-top:20px;padding:12px 28px" onclick="showSaved(this)">Save Settings</button>
        </div></div>
      </div>

      <!-- ‚îÄ‚îÄ SETTINGS BRANDING ‚îÄ‚îÄ -->
      <div class="panel" id="panel-settings-branding">
        <div class="panel-header">
          <div><div class="panel-title">Settings ¬∑ Branding</div></div>
          <div class="header-actions"><button class="btn btn-amber" onclick="openGuide()">üìñ User Guide</button></div>
        </div>
        <div class="panel-body"><div style="max-width:480px">
          <div style="margin-bottom:16px"><label class="field-label">Jukebox Name</label><input class="text-input" value="Obie Jukebox"></div>
          <div style="margin-bottom:16px"><label class="field-label">Logo URL</label><input class="text-input" placeholder="https://example.com/logo.png" style="font-family:var(--font-mono);font-size:12px"></div>
          <div style="margin-bottom:20px">
            <label class="field-label">Theme</label>
            <div style="display:flex;gap:10px">
              <button class="btn btn-amber" style="flex:1;justify-content:center">üåô Dark</button>
              <button class="btn btn-ghost" style="flex:1;justify-content:center">‚òÄÔ∏è Light</button>
            </div>
          </div>
          <button class="btn btn-solid" style="padding:12px 28px" onclick="showSaved(this)">Save Branding</button>
        </div></div>
      </div>

      <!-- ‚îÄ‚îÄ SETTINGS SCRIPTS ‚îÄ‚îÄ -->
      <div class="panel" id="panel-settings-scripts">
        <div class="panel-header">
          <div><div class="panel-title">Functions & Scripts</div><div class="panel-sub">Run server-side operations</div></div>
        </div>
        <div class="panel-body" id="scripts-list"></div>
      </div>

      <!-- ‚îÄ‚îÄ LOGS ‚îÄ‚îÄ -->
      <div class="panel" id="panel-logs-">
        <div class="panel-header">
          <div><div class="panel-title">System Logs</div><div class="panel-sub">Real-time event stream</div></div>
          <div class="header-actions">
            <div class="search-bar">
              <span>üîç</span>
              <input placeholder="Search logs‚Ä¶" oninput="filterLogs(this.value)">
            </div>
            <div class="log-filters">
              <button class="filter-btn" onclick="setLogFilter('all',this)" style="background:rgba(245,158,11,0.15);color:var(--amber);border:1px solid rgba(245,158,11,0.25)">All</button>
              <button class="filter-btn" onclick="setLogFilter('info',this)" style="background:rgba(255,255,255,0.04);color:var(--muted);border:1px solid rgba(255,255,255,0.07)">Info</button>
              <button class="filter-btn" onclick="setLogFilter('warning',this)" style="background:rgba(255,255,255,0.04);color:var(--muted);border:1px solid rgba(255,255,255,0.07)">Warn</button>
              <button class="filter-btn" onclick="setLogFilter('error',this)" style="background:rgba(255,255,255,0.04);color:var(--muted);border:1px solid rgba(255,255,255,0.07)">Error</button>
            </div>
          </div>
        </div>
        <div class="panel-body" id="logs-container"></div>
      </div>

      <!-- ‚îÄ‚îÄ SETTINGS PREFERENCES ‚îÄ‚îÄ -->
      <div class="panel" id="panel-settings-prefs">
        <div class="panel-header">
          <div>
            <div class="panel-title">Console Preferences</div>
            <div class="panel-sub">Personalise your Admin Console appearance ‚Äî saved automatically</div>
          </div>
        </div>
        <div class="panel-body">

          <!-- ‚îÄ‚îÄ Font Size ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="prefs-section">
            <div class="prefs-section-title">Text &amp; Display Size</div>

            <div class="fontsize-row">
              <!-- Live preview number -->
              <div style="flex-shrink:0;width:52px;text-align:center">
                <div class="fontsize-preview" id="fs-preview-num" style="color:var(--accent)">Aa</div>
                <div style="font-family:var(--font-mono);font-size:9px;color:rgba(255,255,255,0.28);margin-top:4px" id="fs-preview-label">Normal</div>
              </div>

              <div class="fontsize-label-wrap">
                <div class="fontsize-label">Interface Text Size</div>
                <div class="fontsize-desc">Scales all text, labels and controls across the console</div>
                <!-- Scale track indicator -->
                <div style="display:flex;align-items:center;gap:6px;margin-top:8px">
                  <div class="fs-scale-track">
                    <div class="fs-scale-pip" id="pip-0"></div>
                    <div class="fs-scale-pip" id="pip-1"></div>
                    <div class="fs-scale-pip active" id="pip-2"></div>
                    <div class="fs-scale-pip" id="pip-3"></div>
                  </div>
                  <span style="font-family:var(--font-mono);font-size:9px;color:rgba(255,255,255,0.25)" id="fs-zoom-val">100%</span>
                </div>
              </div>

              <!-- Buttons -->
              <div class="fontsize-buttons">
                <button class="fs-btn" id="fsb-0" onclick="setFontSize(0)">
                  <span class="fs-btn-icon" style="font-size:12px">Aa</span>
                  <span class="fs-btn-label">Smallest</span>
                </button>
                <button class="fs-btn" id="fsb-1" onclick="setFontSize(1)">
                  <span class="fs-btn-icon" style="font-size:15px">Aa</span>
                  <span class="fs-btn-label">Smaller</span>
                </button>
                <button class="fs-btn active" id="fsb-2" onclick="setFontSize(2)">
                  <span class="fs-btn-icon" style="font-size:18px">Aa</span>
                  <span class="fs-btn-label">Normal</span>
                </button>
                <button class="fs-btn" id="fsb-3" onclick="setFontSize(3)">
                  <span class="fs-btn-icon" style="font-size:21px">Aa</span>
                  <span class="fs-btn-label">Larger</span>
                </button>
                <button class="fs-btn" id="fsb-4" onclick="setFontSize(4)">
                  <span class="fs-btn-icon" style="font-size:24px">Aa</span>
                  <span class="fs-btn-label">Largest</span>
                </button>
              </div>
            </div>

            <!-- Toast confirmation -->
            <div id="fs-saved-toast" style="display:none;font-family:var(--font-mono);font-size:10px;color:#4ade80;padding:6px 12px;border-radius:8px;background:rgba(74,222,128,0.1);border:1px solid rgba(74,222,128,0.2);width:fit-content">
              ‚úì Font size saved to preferences
            </div>
          </div>

          <!-- ‚îÄ‚îÄ Accent Color ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
          <div class="prefs-section">
            <div class="prefs-section-title">Theme Accent Colour</div>

            <div class="color-section-inner">
              <div class="color-wheel-row">
                <!-- Conic color wheel button (opens native picker) -->
                <div style="position:relative;flex-shrink:0">
                  <div class="color-wheel-btn" id="color-wheel-wrap" title="Open colour picker">
                    <div class="color-wheel-inner"></div>
                    <input type="color" id="color-picker" value="#f59e0b" oninput="onColorInput(this.value)" onchange="applyAccentColor(this.value,true)">
                  </div>
                  <div style="position:absolute;bottom:-4px;right:-4px;width:16px;height:16px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 4px rgba(0,0,0,0.5);pointer-events:none">
                    <span style="font-size:9px">‚úé</span>
                  </div>
                </div>

                <!-- Current swatch + info + hex input -->
                <div style="display:flex;flex-direction:column;gap:8px;flex:1">
                  <div style="display:flex;align-items:center;gap:10px">
                    <div class="color-current-swatch" id="current-swatch" style="background:#f59e0b;box-shadow:0 0 14px rgba(245,158,11,0.45)"></div>
                    <div class="color-wheel-info">
                      <div class="color-wheel-title">Highlight Colour</div>
                      <div class="color-wheel-sub" id="accent-name-label">Amber (default)</div>
                    </div>
                  </div>
                  <div class="color-hex-row">
                    <span style="font-family:var(--font-mono);font-size:11px;color:rgba(255,255,255,0.3)">#</span>
                    <input class="color-hex-input" id="hex-input" value="f59e0b" maxlength="6"
                      oninput="onHexInput(this.value)" onkeydown="if(event.key==='Enter')applyAccentColor('#'+this.value,true)">
                    <button class="color-apply-btn" onclick="applyAccentColor('#'+document.getElementById('hex-input').value,true)">Apply</button>
                    <button class="color-apply-btn" onclick="resetAccentColor()" style="margin-left:auto">Reset</button>
                  </div>
                </div>
              </div>

              <!-- Preset colour swatches -->
              <div class="preset-label">Quick presets</div>
              <div class="preset-grid" id="preset-grid">
                <!-- rendered by JS -->
              </div>

              <!-- Live preview strip -->
              <div class="color-preview-strip">
                <span class="preview-strip-label">Preview</span>
                <div class="preview-elements">
                  <div class="preview-nav-dot" id="prev-nav-dot" style="background:var(--accent)"></div>
                  <div class="preview-pill" id="prev-pill" style="background:var(--accent-dim);color:var(--accent);border:1px solid var(--accent-border)">‚óè LIVE</div>
                  <div class="preview-dot" id="prev-dot" style="background:var(--accent)"></div>
                  <div class="preview-bar" id="prev-bar" style="background:linear-gradient(90deg,var(--accent),rgba(var(--accent-rgb),0.3))"></div>
                  <div class="preview-btn" id="prev-btn" style="background:var(--accent)">Save</div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

    </main>
  </div>
</div>

<!-- User Guide Overlay (simplified) -->
<div id="guide-overlay" style="display:none;position:fixed;inset:0;z-index:100;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);align-items:center;justify-content:center">
  <div style="width:min(860px,95vw);height:80vh;display:flex;flex-direction:column;border-radius:20px;background:#0e0e0e;border:1px solid rgba(255,255,255,0.1);overflow:hidden">
    <div style="display:flex;align-items:center;gap:12px;padding:16px 22px;border-bottom:1px solid rgba(255,255,255,0.08)">
      <div class="obie-logo">O</div>
      <div><div style="font-family:var(--font-display);font-weight:700;font-size:16px;color:#fff">User Guide</div><div style="font-family:var(--font-mono);font-size:10px;color:var(--muted)">Obie Jukebox v2 ‚Äî Complete Reference</div></div>
      <button onclick="closeGuide()" style="margin-left:auto;background:rgba(255,255,255,0.08);border:none;color:rgba(255,255,255,0.5);width:30px;height:30px;border-radius:8px;cursor:pointer;font-size:15px">‚úï</button>
    </div>
    <div style="display:flex;flex:1;overflow:hidden">
      <div style="width:180px;border-right:1px solid rgba(255,255,255,0.06);padding:10px 0;overflow-y:auto;font-family:var(--font-display);font-size:13px">
        <div class="sub-btn active" style="color:var(--amber);display:flex;align-items:center;gap:8px;padding:9px 16px">üöÄ Installation</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üîê Auth & Users</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üéµ Queue</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üìã Playlists</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">‚öôÔ∏è Settings</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üîç Kiosk</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">‚ñ∂Ô∏è Player</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üì∫ YouTube API</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üåê Deployment</div>
        <div class="sub-btn" style="display:flex;align-items:center;gap:8px;padding:9px 16px">üêõ Troubleshoot</div>
      </div>
      <div style="flex:1;overflow-y:auto;padding:24px 28px">
        <h2 style="font-family:var(--font-display);font-size:20px;font-weight:700;color:#fff;margin-bottom:16px">üöÄ Installation & Setup</h2>
        <p style="color:rgba(255,255,255,0.55);font-size:14px;line-height:1.7;margin-bottom:16px">Prerequisites: Node.js 18+, Docker (for local Supabase), Supabase CLI, and a Supabase account (free tier fully supported).</p>
        <div style="background:#0a0a0a;border:1px solid rgba(255,255,255,0.1);border-radius:12px;overflow:hidden;margin-bottom:16px">
          <div style="padding:8px 14px;background:rgba(255,255,255,0.04);border-bottom:1px solid rgba(255,255,255,0.07);font-family:var(--font-mono);font-size:10px;color:var(--muted)">Clone & Install</div>
          <pre style="padding:14px;font-family:var(--font-mono);font-size:12px;color:#4ade80;margin:0">git clone https://github.com/SystemVirtue/obie-v5
cd obie-v5
npm install
./setup.sh</pre>
        </div>
        <div style="background:#0a0a0a;border:1px solid rgba(255,255,255,0.1);border-radius:12px;overflow:hidden;margin-bottom:16px">
          <div style="padding:8px 14px;background:rgba(255,255,255,0.04);border-bottom:1px solid rgba(255,255,255,0.07);font-family:var(--font-mono);font-size:10px;color:var(--muted)">Start All Services</div>
          <pre style="padding:14px;font-family:var(--font-mono);font-size:12px;color:#4ade80;margin:0">npm run supabase:start   # Terminal 1
npm run dev              # Terminal 2
# Admin:  http://localhost:5173
# Player: http://localhost:5174
# Kiosk:  http://localhost:5175</pre>
        </div>
        <div style="background:rgba(251,191,36,0.08);border:1px solid rgba(251,191,36,0.2);border-radius:10px;padding:12px 16px;font-size:13px;color:#fbbf24">
          ‚ö†Ô∏è Keep the Player Window open at all times ‚Äî it sends a heartbeat every 3 seconds. Without it, all operations will show "Player offline".
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const QUEUE = [
  {id:1,title:"Midnight City",artist:"M83",duration:"4:03",thumb:"https://i.ytimg.com/vi/gGdGFtwCNBE/mqdefault.jpg"},
  {id:2,title:"Oblivion",artist:"Grimes",duration:"5:03",thumb:"https://i.ytimg.com/vi/1rZdHGmRbdA/mqdefault.jpg"},
  {id:3,title:"Flume",artist:"Bon Iver",duration:"3:40",thumb:"https://i.ytimg.com/vi/JlVID4VhLWI/mqdefault.jpg"},
  {id:4,title:"Do I Wanna Know?",artist:"Arctic Monkeys",duration:"4:32",thumb:"https://i.ytimg.com/vi/bpOSxM0MsIk/mqdefault.jpg"},
  {id:5,title:"Electric Feel",artist:"MGMT",duration:"3:49",thumb:"https://i.ytimg.com/vi/MmZexg8sxyk/mqdefault.jpg"},
  {id:6,title:"Holocene",artist:"Bon Iver",duration:"5:37",thumb:"https://i.ytimg.com/vi/TWcyIpul8OE/mqdefault.jpg"},
  {id:7,title:"Crystalised",artist:"The xx",duration:"3:31",thumb:"https://i.ytimg.com/vi/kfGMUZC74jg/mqdefault.jpg"},
  {id:8,title:"Take Care",artist:"Drake ft. Rihanna",duration:"4:38",thumb:"https://i.ytimg.com/vi/4kvd5-GkfTs/mqdefault.jpg"},
];

const PLAYLISTS = [
  {id:1,name:"Obie Playlist",songs:1217,active:true,last:"Now"},
  {id:2,name:"Main Playlist",songs:192,active:false,last:"Yesterday"},
  {id:3,name:"Obie Nights",songs:190,active:false,last:"2 days ago"},
  {id:4,name:"Poly",songs:82,active:false,last:"4 days ago"},
  {id:5,name:"Obie Johno",songs:78,active:false,last:"1 week ago"},
  {id:6,name:"DJAMMMS Default",songs:58,active:false,last:"1 week ago"},
  {id:7,name:"Karaoke",songs:57,active:false,last:"2 weeks ago"},
  {id:8,name:"Obie Jo",songs:35,active:false,last:"1 month ago"},
];

const LOGS = [
  {level:"info",time:"14:32:01",source:"player-control",message:"Song started: Sonnentanz by Klangkarussell"},
  {level:"info",time:"14:31:58",source:"queue-manager",message:"Queue advanced ‚Äî now_playing_index: 94"},
  {level:"info",time:"14:31:55",source:"kiosk-handler",message:"Kiosk request added: Bohemian Rhapsody (Table 4)"},
  {level:"info",time:"14:31:50",source:"player-control",message:"Player heartbeat OK ‚Äî latency 12ms"},
  {level:"warning",time:"14:30:22",source:"playlist-manager",message:"YouTube API quota at 82% for key #3"},
  {level:"info",time:"14:28:11",source:"kiosk-handler",message:"Credit added: session a3f9b2 ‚Äî balance: 2"},
  {level:"info",time:"14:25:00",source:"playlist-manager",message:"Playlist loaded: Obie Playlist ‚Äî 35 songs into queue"},
  {level:"info",time:"14:24:58",source:"player-control",message:"Player initialised ‚Äî now_playing_index: 0"},
  {level:"error",time:"14:20:13",source:"playlist-manager",message:"Edge Function timeout: playlist-manager (>10s)"},
  {level:"info",time:"14:18:30",source:"auth",message:"Admin signed in: admin@example.com"},
];

const SCRIPTS = [
  {id:"setup",name:"setup.sh",icon:"‚ö°",cat:"Setup",desc:"Interactive first-run configuration wizard",input:false},
  {id:"populate",name:"populate-playlist.sh",icon:"üì•",cat:"Playlists",desc:"Import a single YouTube playlist by ID",input:true,placeholder:"PLN9QqCogPsXJCgeL_iEgYnW6Rl_8nIUUH"},
  {id:"import-all",name:"import-all-playlists.sh",icon:"üì¶",cat:"Playlists",desc:"Batch import all configured playlists",input:false},
  {id:"retry",name:"retry-failed-playlists.sh",icon:"üîÑ",cat:"Playlists",desc:"Retry failed imports with API key rotation",input:false},
];

// ‚îÄ‚îÄ Render dynamic lists ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderQueue() {
  const el = document.getElementById('queue-list');
  el.innerHTML = QUEUE.map((t,i) => `
    <div class="queue-item">
      <span class="item-pos">${i+1}</span>
      <img class="item-thumb" src="${t.thumb}" onerror="this.style.display='none'" alt="">
      <div class="item-info"><div class="item-title">${t.title}</div><div class="item-artist">${t.artist}</div></div>
      <span class="item-dur">${t.duration}</span>
      <div class="item-actions">
        <span style="font-family:var(--font-mono);font-size:11px;color:rgba(255,255,255,0.3);margin-right:4px">${t.duration}</span>
        <button class="icon-btn del" onclick="removeQueue(${t.id})">üóë</button>
      </div>
    </div>`).join('');
  document.getElementById('queue-count').textContent = `${QUEUE.length} songs in queue`;
}

function removeQueue(id) {
  const idx = QUEUE.findIndex(t => t.id === id);
  if (idx > -1) { QUEUE.splice(idx, 1); renderQueue(); }
}

function renderPlaylists() {
  const el = document.getElementById('pl-list');
  el.innerHTML = PLAYLISTS.map((p,i) => `
    <div class="pl-item ${p.active ? 'pl-active' : ''}">
      <div class="pl-icon">üéµ</div>
      <div style="flex:1;min-width:0">
        <div style="display:flex;align-items:center;gap:8px">
          <div class="pl-name">${p.name}</div>
          ${p.active ? '<span class="pl-active-badge">ACTIVE</span>' : ''}
        </div>
        <div class="pl-meta">${p.songs.toLocaleString()} songs ¬∑ Last played ${p.last}</div>
      </div>
      <div class="pl-actions">
        ${!p.active ? `<button class="btn btn-amber" onclick="setActive(${p.id})">Set Active</button>` : ''}
        <button class="btn btn-ghost" style="font-size:12px">Load Queue</button>
        <button class="icon-btn del">üóë</button>
      </div>
      <span style="font-family:var(--font-mono);font-size:11px;color:rgba(255,255,255,0.2);flex-shrink:0;width:24px;text-align:center">${i+1}</span>
    </div>`).join('');
}

function setActive(id) {
  PLAYLISTS.forEach(p => p.active = p.id === id);
  renderPlaylists();
}

let logFilter = 'all';
function renderLogs(search = '') {
  const el = document.getElementById('logs-container');
  const filtered = LOGS.filter(l => {
    if (logFilter !== 'all' && l.level !== logFilter) return false;
    if (search && !l.message.toLowerCase().includes(search.toLowerCase()) && !l.source.includes(search)) return false;
    return true;
  });
  el.innerHTML = filtered.map(l => `
    <div class="log-entry">
      <span class="log-time">${l.time}</span>
      <span class="log-level ${l.level}">${l.level}</span>
      <span class="log-source">${l.source}</span>
      <span class="log-msg">${l.message}</span>
    </div>`).join('');
}

function setLogFilter(f, btn) {
  logFilter = f;
  document.querySelectorAll('.filter-btn').forEach(b => {
    b.style.background = 'rgba(255,255,255,0.04)';
    b.style.color = 'rgba(255,255,255,0.4)';
    b.style.border = '1px solid rgba(255,255,255,0.07)';
  });
  btn.style.background = 'rgba(245,158,11,0.15)';
  btn.style.color = '#f59e0b';
  btn.style.border = '1px solid rgba(245,158,11,0.25)';
  renderLogs();
}

function filterLogs(v) { renderLogs(v); }

function renderScripts() {
  const el = document.getElementById('scripts-list');
  el.innerHTML = SCRIPTS.map(s => `
    <div class="script-card" id="sc-${s.id}">
      <div class="script-header">
        <div class="script-icon">${s.icon}</div>
        <div style="flex:1;min-width:0">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:4px">
            <span class="script-name">${s.name}</span>
            <span class="script-cat">${s.cat}</span>
          </div>
          <div class="script-desc">${s.desc}</div>
          ${s.input ? `<input class="script-input" id="si-${s.id}" placeholder="${s.placeholder}">` : ''}
        </div>
        <button class="btn btn-solid" onclick="runScript('${s.id}',${s.input})">‚ñ∂ Run</button>
      </div>
      <div id="slog-${s.id}" style="display:none"></div>
    </div>`).join('');
}

function runScript(id, needsInput) {
  if (needsInput) {
    const v = document.getElementById(`si-${id}`)?.value.trim();
    if (!v) { document.getElementById(`si-${id}`).style.borderColor = '#f87171'; return; }
  }
  const logEl = document.getElementById(`slog-${id}`);
  const name = SCRIPTS.find(s=>s.id===id)?.name || id;
  logEl.style.display = 'block';
  logEl.innerHTML = `<div class="log-header"><div class="log-status-dot running"></div><span class="log-text">RUNNING</span></div><pre class="log-pre" id="lpre-${id}">$ ./${name}\n</pre>`;
  const msgs = ['Connecting to Supabase‚Ä¶','Authenticating‚Ä¶',`Executing ${name}‚Ä¶`,'Processing‚Ä¶','‚úì Completed successfully.'];
  let i = 0;
  const iv = setInterval(() => {
    if (i < msgs.length) {
      document.getElementById(`lpre-${id}`).textContent += msgs[i++] + '\n';
    } else {
      clearInterval(iv);
      logEl.querySelector('.log-status-dot').classList.remove('running');
      logEl.querySelector('.log-status-dot').classList.add('done');
      logEl.querySelector('.log-text').textContent = 'COMPLETED';
    }
  }, 500);
}

// ‚îÄ‚îÄ Navigation ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let activeGroup = 'queue';
function toggleGroup(group, firstView) {
  const groups = ['queue','playlists','settings','logs-'];
  const submenu = document.getElementById(`sub-${group}`);
  const chev = document.getElementById(`chev-${group}`);
  const allGroupBtns = document.querySelectorAll('.nav-group-btn');

  if (activeGroup === group) return;
  // close old
  const old = document.getElementById(`sub-${activeGroup}`);
  const oldChev = document.getElementById(`chev-${activeGroup}`);
  if (old) { old.classList.remove('open'); }
  if (oldChev) { oldChev.classList.remove('open'); }
  allGroupBtns.forEach(b => b.classList.remove('active'));

  // open new
  if (submenu) { submenu.classList.add('open'); }
  if (chev) { chev.classList.add('open'); }
  event.currentTarget.classList.add('active');
  activeGroup = group;
  setView(firstView);
}

function setView(view) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  const panel = document.getElementById(`panel-${view}`);
  if (panel) panel.classList.add('active');

  document.querySelectorAll('.sub-btn').forEach(b => {
    b.classList.remove('active');
    if (b.getAttribute('onclick') && b.getAttribute('onclick').includes(`'${view}'`)) b.classList.add('active');
  });
}

// ‚îÄ‚îÄ Sidebar toggle ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleSidebar() {
  const s = document.getElementById('sidebar');
  s.classList.toggle('collapsed');
}

// ‚îÄ‚îÄ Player controls ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let isPlaying = true;
let progressSec = 94;
const DURATION = 272;

function togglePlay() {
  isPlaying = !isPlaying;
  document.getElementById('play-btn').textContent = isPlaying ? '‚è∏' : '‚ñ∂';
}

function seekTo(e) {
  const rect = e.currentTarget.getBoundingClientRect();
  const pct = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
  progressSec = Math.round(pct * DURATION);
  updateProgress();
}

function setVol(e) {
  const rect = e.currentTarget.getBoundingClientRect();
  const pct = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
  const vol = Math.round(pct * 100);
  document.getElementById('vol-fill').style.width = vol + '%';
  document.getElementById('vol-val').textContent = vol;
}

function skipTrack() {
  progressSec = 0;
  updateProgress();
}

function updateProgress() {
  const pct = (progressSec / DURATION) * 100;
  document.getElementById('prog-fill').style.width = pct + '%';
  const m = Math.floor(progressSec/60);
  const s = String(progressSec%60).padStart(2,'0');
  document.getElementById('prog-cur').textContent = `${m}:${s}`;
}

setInterval(() => {
  if (!isPlaying) return;
  progressSec = progressSec < DURATION ? progressSec + 1 : 0;
  updateProgress();
}, 1000);

// ‚îÄ‚îÄ Guide ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function openGuide() { document.getElementById('guide-overlay').style.display = 'flex'; }
function closeGuide() { document.getElementById('guide-overlay').style.display = 'none'; }

// ‚îÄ‚îÄ Save feedback ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showSaved(btn) {
  const orig = btn.textContent;
  btn.textContent = '‚úì Saved';
  btn.style.background = 'rgba(34,197,94,0.2)';
  btn.style.color = '#4ade80';
  btn.style.border = '1px solid rgba(34,197,94,0.3)';
  setTimeout(() => {
    btn.textContent = orig;
    btn.style.background = 'linear-gradient(135deg,#f59e0b,#d97706)';
    btn.style.color = '#000';
    btn.style.border = 'none';
  }, 2500);
}

// ‚îÄ‚îÄ PREFERENCES ENGINE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

/* ‚îÄ‚îÄ Preset colours ‚îÄ‚îÄ */
const PRESETS = [
  { hex: '#f59e0b', name: 'Amber (default)' },
  { hex: '#ef4444', name: 'Red' },
  { hex: '#f97316', name: 'Orange' },
  { hex: '#eab308', name: 'Yellow' },
  { hex: '#22c55e', name: 'Green' },
  { hex: '#14b8a6', name: 'Teal' },
  { hex: '#06b6d4', name: 'Cyan' },
  { hex: '#3b82f6', name: 'Blue' },
  { hex: '#6366f1', name: 'Indigo' },
  { hex: '#8b5cf6', name: 'Violet' },
  { hex: '#d946ef', name: 'Fuchsia' },
  { hex: '#ec4899', name: 'Pink' },
  { hex: '#f43f5e', name: 'Rose' },
  { hex: '#94a3b8', name: 'Slate' },
  { hex: '#a3e635', name: 'Lime' },
  { hex: '#ffffff', name: 'White' },
];

/* ‚îÄ‚îÄ Font size scales ‚îÄ‚îÄ */
const FS_SCALES = [
  { zoom: 0.80, label: 'Smallest', pct: '80%' },
  { zoom: 0.90, label: 'Smaller',  pct: '90%' },
  { zoom: 1.00, label: 'Normal',   pct: '100%' },
  { zoom: 1.12, label: 'Larger',   pct: '112%' },
  { zoom: 1.25, label: 'Largest',  pct: '125%' },
];

/* ‚îÄ‚îÄ Hex ‚Üí RGB helper ‚îÄ‚îÄ */
function hexToRgb(hex) {
  hex = hex.replace('#','');
  if (hex.length === 3) hex = hex.split('').map(c=>c+c).join('');
  const n = parseInt(hex, 16);
  return [(n>>16)&255,(n>>8)&255,n&255];
}

/* ‚îÄ‚îÄ Darken hex by pct (0-1) ‚îÄ‚îÄ */
function darken(hex, pct) {
  const [r,g,b] = hexToRgb(hex);
  const f = 1 - pct;
  return '#' + [r,g,b].map(v=>Math.round(v*f).toString(16).padStart(2,'0')).join('');
}

/* ‚îÄ‚îÄ Is colour "light"? (choose dark text on button) ‚îÄ‚îÄ */
function isLight(hex) {
  const [r,g,b] = hexToRgb(hex);
  return (r*0.299 + g*0.587 + b*0.114) > 186;
}

/* ‚îÄ‚îÄ Apply accent colour everywhere ‚îÄ‚îÄ */
function applyAccentColor(hex, save) {
  // Validate
  hex = hex.trim();
  if (!/^#[0-9a-fA-F]{6}$/.test(hex)) return;

  const [r,g,b] = hexToRgb(hex);
  const darkened = darken(hex, 0.12);
  const root = document.documentElement;

  root.style.setProperty('--accent', hex);
  root.style.setProperty('--accent-dim', `rgba(${r},${g},${b},0.15)`);
  root.style.setProperty('--accent-border', `rgba(${r},${g},${b},0.32)`);
  root.style.setProperty('--accent-glow', `rgba(${r},${g},${b},0.38)`);
  root.style.setProperty('--accent-rgb', `${r},${g},${b}`);
  // Keep --amber in sync so existing btn-amber / amber-hardcoded styles update
  root.style.setProperty('--amber', hex);
  root.style.setProperty('--amber-dim', `rgba(${r},${g},${b},0.15)`);
  root.style.setProperty('--amber-glow', `rgba(${r},${g},${b},0.38)`);

  // Play button gradient
  injectDynStyle('play-btn-style', `.play-btn{background:linear-gradient(135deg,${hex},${darkened})!important;box-shadow:0 4px 20px rgba(${r},${g},${b},0.45)!important}`);
  // Slider thumb
  injectDynStyle('slider-style', `input[type=range]::-webkit-slider-thumb{background:${hex}!important;box-shadow:0 0 10px rgba(${r},${g},${b},0.6)!important}`);
  // Progress fill
  injectDynStyle('progress-style', `.progress-fill{background:linear-gradient(90deg,${hex},rgba(${r},${g},${b},0.7))!important}`);
  // Obie logo
  injectDynStyle('logo-style', `.obie-logo{background:linear-gradient(135deg,${hex},${darkened})!important;box-shadow:0 0 16px rgba(${r},${g},${b},0.38)!important}`);
  // btn-solid
  injectDynStyle('btn-solid-style', `.btn-solid{background:linear-gradient(135deg,${hex},${darkened})!important;color:${isLight(hex)?'#000':'#fff'}!important}`);
  // nav active
  injectDynStyle('nav-active-style', `.nav-group-btn.active{color:${hex}!important}.nav-group-btn.active .nav-icon-wrap{background:rgba(${r},${g},${b},0.14)!important}.nav-group-btn.active::before{background:${hex}!important}.sub-btn.active{color:${hex}!important}.sub-btn.active .sub-dot{background:${hex}!important}`);
  // play btn color wheel glow ring
  injectDynStyle('wheel-style', `.color-wheel-btn{border-color:rgba(${r},${g},${b},0.5)!important}`);
  // stage accent line
  injectDynStyle('stage-line', `#stage::after{background:linear-gradient(90deg,transparent,rgba(${r},${g},${b},0.4),transparent)!important}`);

  // Update UI elements
  const swatch = document.getElementById('current-swatch');
  if (swatch) { swatch.style.background = hex; swatch.style.boxShadow = `0 0 14px rgba(${r},${g},${b},0.45)`; }
  const hexInput = document.getElementById('hex-input');
  if (hexInput) hexInput.value = hex.replace('#','');
  const picker = document.getElementById('color-picker');
  if (picker) picker.value = hex;

  // Preset name lookup
  const preset = PRESETS.find(p=>p.hex.toLowerCase()===hex.toLowerCase());
  const nameEl = document.getElementById('accent-name-label');
  if (nameEl) nameEl.textContent = preset ? preset.name : hex.toUpperCase();

  // Mark selected preset
  document.querySelectorAll('.preset-swatch').forEach(el => {
    el.classList.toggle('selected', el.dataset.hex.toLowerCase() === hex.toLowerCase());
  });

  if (save) {
    try { localStorage.setItem('obie_accent', hex); } catch(e){}
    showColorSavedToast(hex);
  }
}

function injectDynStyle(id, css) {
  let el = document.getElementById(id);
  if (!el) { el = document.createElement('style'); el.id = id; document.head.appendChild(el); }
  el.textContent = css;
}

function onColorInput(val) {
  // Live preview as user drags the native picker (before they release)
  applyAccentColor(val, false);
}

function onHexInput(val) {
  val = val.replace(/[^0-9a-fA-F]/g,'').slice(0,6);
  document.getElementById('hex-input').value = val;
  if (val.length === 6) applyAccentColor('#'+val, false);
}

function resetAccentColor() {
  applyAccentColor('#f59e0b', true);
  document.getElementById('accent-name-label').textContent = 'Amber (default)';
}

function showColorSavedToast(hex) {
  // Brief inline toast on the preview strip
  const strip = document.querySelector('.color-preview-strip');
  if (!strip) return;
  const toast = document.createElement('div');
  toast.textContent = '‚úì Saved';
  toast.style.cssText = `font-family:var(--font-mono);font-size:9px;color:${hex};padding:2px 8px;border-radius:6px;background:rgba(255,255,255,0.05);margin-left:8px;flex-shrink:0;animation:fadeOut 2s forwards`;
  strip.appendChild(toast);
  injectDynStyle('fade-anim',`@keyframes fadeOut{0%{opacity:1}70%{opacity:1}100%{opacity:0}}`);
  setTimeout(()=>toast.remove(),2100);
}

/* ‚îÄ‚îÄ Font size engine ‚îÄ‚îÄ */
let currentFsIdx = 2;

function setFontSize(idx) {
  currentFsIdx = idx;
  const scale = FS_SCALES[idx];

  // Apply zoom to #app (scales entire UI proportionally)
  const app = document.getElementById('app');
  if (app) {
    app.style.zoom = scale.zoom;
    // For Firefox fallback (zoom not supported historically)
    // app.style.transform = `scale(${scale.zoom})`;
    // app.style.transformOrigin = 'top left';
    // app.style.width = `${100/scale.zoom}%`;
    // app.style.height = `${100/scale.zoom}vh`;
  }

  // Update UI controls
  for (let i = 0; i < FS_SCALES.length; i++) {
    const btn = document.getElementById(`fsb-${i}`);
    const pip = document.getElementById(`pip-${i}`);
    if (btn) btn.classList.toggle('active', i === idx);
    if (pip) pip.classList.toggle('active', i === idx);
  }

  const previewEl = document.getElementById('fs-preview-num');
  if (previewEl) previewEl.style.fontSize = (14 + idx * 4) + 'px';
  const labelEl = document.getElementById('fs-preview-label');
  if (labelEl) labelEl.textContent = scale.label;
  const zoomEl = document.getElementById('fs-zoom-val');
  if (zoomEl) zoomEl.textContent = scale.pct;

  // Save
  try { localStorage.setItem('obie_fontsize', idx); } catch(e) {}

  // Show toast
  const toast = document.getElementById('fs-saved-toast');
  if (toast) {
    toast.style.display = 'block';
    clearTimeout(window._fsToast);
    window._fsToast = setTimeout(()=>{ toast.style.display='none'; }, 2200);
  }
}

/* ‚îÄ‚îÄ Render preset swatches ‚îÄ‚îÄ */
function renderPresets() {
  const grid = document.getElementById('preset-grid');
  if (!grid) return;
  const currentAccent = (localStorage.getItem('obie_accent') || '#f59e0b').toLowerCase();
  grid.innerHTML = PRESETS.map(p => `
    <button class="preset-swatch ${p.hex.toLowerCase()===currentAccent?'selected':''}"
      data-hex="${p.hex}"
      style="background:${p.hex}"
      title="${p.name}"
      onclick="applyAccentColor('${p.hex}',true)">
    </button>`).join('');
}

/* ‚îÄ‚îÄ Load saved prefs on init ‚îÄ‚îÄ */
function loadPrefs() {
  // Color
  const savedColor = localStorage.getItem('obie_accent');
  if (savedColor) applyAccentColor(savedColor, false);

  // Font size
  const savedFs = localStorage.getItem('obie_fontsize');
  if (savedFs !== null) setFontSize(parseInt(savedFs,10));

  renderPresets();
}

// ‚îÄ‚îÄ Init ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
renderQueue();
renderPlaylists();
renderLogs();
renderScripts();
loadPrefs();
</script>
</body>
</html>
